\hypertarget{Main_8c}{}\doxysection{Main.\+c File Reference}
\label{Main_8c}\index{Main.c@{Main.c}}


Main file of the program.  


{\ttfamily \#include $<$errno.\+h$>$}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$sys/socket.\+h$>$}\newline
{\ttfamily \#include $<$sys/types.\+h$>$}\newline
{\ttfamily \#include $<$sys/wait.\+h$>$}\newline
{\ttfamily \#include $<$unistd.\+h$>$}\newline
{\ttfamily \#include \char`\"{}config.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}perform\+Connection.\+h\char`\"{}}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{Main_8c_a259e5e2af35082b1169c6cb794725c08}{set\+Options}} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]}, \mbox{\hyperlink{performConnection_8h_ae263205459038225639be8ab6f6bc760}{opt\+\_\+t}} $\ast$opt, \mbox{\hyperlink{structConfig}{config\+\_\+t}} $\ast$$\ast$config)
\begin{DoxyCompactList}\small\item\em Parse arguments. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{Main_8c_a0ddf1224851353fc92bfbff6f499fa97}\label{Main_8c_a0ddf1224851353fc92bfbff6f499fa97}} 
int \mbox{\hyperlink{Main_8c_a0ddf1224851353fc92bfbff6f499fa97}{main}} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]})
\begin{DoxyCompactList}\small\item\em set Options and splits up program in Thinker and Connector \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Main file of the program. 

This file is executed first. It contains the whole logic for connecting the different modules of the project. 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{Main_8c_a259e5e2af35082b1169c6cb794725c08}\label{Main_8c_a259e5e2af35082b1169c6cb794725c08}} 
\index{Main.c@{Main.c}!setOptions@{setOptions}}
\index{setOptions@{setOptions}!Main.c@{Main.c}}
\doxysubsubsection{\texorpdfstring{setOptions()}{setOptions()}}
{\footnotesize\ttfamily void set\+Options (\begin{DoxyParamCaption}\item[{int}]{argc,  }\item[{char $\ast$}]{argv\mbox{[}$\,$\mbox{]},  }\item[{\mbox{\hyperlink{performConnection_8h_ae263205459038225639be8ab6f6bc760}{opt\+\_\+t}} $\ast$}]{opt,  }\item[{\mbox{\hyperlink{structConfig}{config\+\_\+t}} $\ast$$\ast$}]{config }\end{DoxyParamCaption})}



Parse arguments. 

Parse arguments, copy them to \mbox{\hyperlink{structOpt}{Opt}} struct and if possible sets the config struct pointer to the created config struct.

-\/g game\+Id -\/p player\+Id -\/c config\+Filename


\begin{DoxyParams}{Parameters}
{\em argc} & length of argv \\
\hline
{\em argv} & char array with the args \\
\hline
{\em $\ast$opt} & opt\+\_\+t struct \\
\hline
{\em $\ast$$\ast$config} & pointer to a pointer of a config\+\_\+t struct \\
\hline
\end{DoxyParams}


Definition at line 38 of file Main.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{38                                                                        \{}
\DoxyCodeLine{39   \textcolor{keywordtype}{int} c;}
\DoxyCodeLine{40   \textcolor{keywordflow}{while} ((c = getopt(argc, argv, \textcolor{stringliteral}{"{}g:p:c:"{}})) != -\/1) \{}
\DoxyCodeLine{41     \textcolor{keywordflow}{switch} (c) \{}
\DoxyCodeLine{42     \textcolor{keywordflow}{case} \textcolor{charliteral}{'g'}:}
\DoxyCodeLine{43       \textcolor{keywordflow}{if} (strlen(optarg) != GAME\_ID\_SIZE) \{}
\DoxyCodeLine{44         printf(\textcolor{stringliteral}{"{}wrong game id\(\backslash\)n"{}});}
\DoxyCodeLine{45         exit(EXIT\_FAILURE);}
\DoxyCodeLine{46       \}}
\DoxyCodeLine{47       strcpy(opt-\/>gameId, optarg);}
\DoxyCodeLine{48       \textcolor{keywordflow}{break};}
\DoxyCodeLine{49     \textcolor{keywordflow}{case} \textcolor{charliteral}{'p'}: \{}
\DoxyCodeLine{50       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} id;}
\DoxyCodeLine{51       \textcolor{keywordflow}{if} (sscanf(optarg, \textcolor{stringliteral}{"{}\%u"{}}, \&\textcolor{keywordtype}{id}) < 1 || id < 1 || id > 2) \{}
\DoxyCodeLine{52         printf(\textcolor{stringliteral}{"{}wrong player id\(\backslash\)n"{}});}
\DoxyCodeLine{53         exit(EXIT\_FAILURE);}
\DoxyCodeLine{54       \}}
\DoxyCodeLine{55       snprintf(opt-\/>playerId, 2, \textcolor{stringliteral}{"{}\%u"{}}, \textcolor{keywordtype}{id} -\/ 1);}
\DoxyCodeLine{56       \textcolor{keywordflow}{break};}
\DoxyCodeLine{57     \}}
\DoxyCodeLine{58     \textcolor{keywordflow}{case} \textcolor{charliteral}{'c'}:}
\DoxyCodeLine{59       *config = \mbox{\hyperlink{config_8h_a0ce16bb38a3b691d96c8ec73fcd3d87f}{readConfigFile}}(optarg);}
\DoxyCodeLine{60     \textcolor{keywordflow}{break};}
\DoxyCodeLine{61     \textcolor{keywordflow}{case} \textcolor{charliteral}{'?'}:}
\DoxyCodeLine{62       printf(\textcolor{stringliteral}{"{}wrong argument\(\backslash\)n"{}});}
\DoxyCodeLine{63       freeConfig(*config);}
\DoxyCodeLine{64       exit(EXIT\_FAILURE);}
\DoxyCodeLine{65       \textcolor{keywordflow}{break};}
\DoxyCodeLine{66 }
\DoxyCodeLine{67     \textcolor{keywordflow}{default}:}
\DoxyCodeLine{68       \textcolor{keywordflow}{break};}
\DoxyCodeLine{69     \}}
\DoxyCodeLine{70   \}}
\DoxyCodeLine{71 }
\DoxyCodeLine{72   \textcolor{comment}{// temporary add game id in Makefile}}
\DoxyCodeLine{73   \textcolor{keywordflow}{if} (strlen(opt-\/>gameId) == 0) \{}
\DoxyCodeLine{74     printf(\textcolor{stringliteral}{"{}game id is missing\(\backslash\)n"{}});}
\DoxyCodeLine{75     exit(EXIT\_FAILURE);}
\DoxyCodeLine{76   \}}
\DoxyCodeLine{77 \}}

\end{DoxyCode}
